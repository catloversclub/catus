generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String   @id @default(uuid(7))
  kakaoId          String   @unique @map("kakao_id")
  nickname         String   @unique
  isLivingWithCat  Boolean  @default(false) @map("is_living_with_cat")
  hasAgreedToTerms Boolean  @default(false) @map("has_agreed_to_term")
  phone            String?
  profileImageUrl  String?  @map("profile_image_url")
  createdAt        DateTime @default(now())

  cats                  Cat[]
  favoriteAppearances   Appearance[]
  favoritePersonalities Personality[]

  @@map("user")
}

enum Gender {
  MALE
  FEMALE
  UNKNOWN
}

model Cat {
  id              String    @id @default(uuid(7))
  name            String
  gender          Gender    @default(UNKNOWN)
  profileImageUrl String?   @map("profile_image_url")
  birthDate       DateTime? @map("birth_date") @db.Date
  breed           String?
  type            Int?
  createdAt       DateTime  @default(now())

  butler        User          @relation(fields: [butlerId], references: [id], onDelete: Cascade)
  butlerId      String
  appearances   Appearance[]
  personalities Personality[]

  @@map("cat")
}

model Appearance {
  id    Int    @id @default(autoincrement())
  label String @unique()

  users User[]
  cats  Cat[]

  @@map("appearance")
}

model Personality {
  id    Int    @id @default(autoincrement())
  label String @unique()

  users User[]
  cats  Cat[]

  @@map("personality")
}
